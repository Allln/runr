<!DOCTYPE html>
<html>
<head>
    
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    
        <script>
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        </script>
    
    <style>html, body {width: 100%;height: 100%;margin: 0;padding: 0;}</style>
    <style>#map {position:absolute;top:0;bottom:0;right:0;left:0;}</style>
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css"/>
    
            <meta name="viewport" content="width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
            <style>
                #map_7d35a53c9e585e88dcd08f0981e271d1 {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            </style>
        
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-locatecontrol/0.66.2/L.Control.Locate.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet-locatecontrol/0.66.2/L.Control.Locate.min.css"/>
</head>
<body>
    
    
            <div class="folium-map" id="map_7d35a53c9e585e88dcd08f0981e271d1" ></div>
        
</body>
<script>
    var map_7d35a53c9e585e88dcd08f0981e271d1 = L.map(
        "map_7d35a53c9e585e88dcd08f0981e271d1", {
            center: [18.9210447, 69.6471286],
            crs: L.CRS.EPSG3857,
            zoom: 15,
            zoomControl: true,
            preferCanvas: false,
        }
    );

    var tile_layer_21e2ad384af0796a27135c41797a6d22 = L.tileLayer(
        "https://tile.openstreetmap.org/{z}/{x}/{y}.png", {
            "attribution": "\u0026copy; \u003ca href=\"https://www.openstreetmap.org/copyright\"\u003eOpenStreetMap\u003c/a\u003e contributors",
            "detectRetina": false,
            "maxNativeZoom": 19,
            "maxZoom": 19,
            "minZoom": 0,
            "noWrap": false,
            "opacity": 1,
            "subdomains": "abc",
            "tms": false
        }
    );

    tile_layer_21e2ad384af0796a27135c41797a6d22.addTo(map_7d35a53c9e585e88dcd08f0981e271d1);

    var markersLayer = new L.LayerGroup().addTo(map_7d35a53c9e585e88dcd08f0981e271d1);

async function generateRandomPoints(centroid, distance, numPoints) {
    // Define the base URL for the Overpass API
    const baseUrl = 'https://overpass-api.de/api/interpreter';

    // Define the query to fetch random points within the specified distance from the centroid
    const query = `[out:json]; 
        (
            node(around:${distance},${centroid[0]},${centroid[1]});
            way(around:${distance},${centroid[0]},${centroid[1]});
            relation(around:${distance},${centroid[0]},${centroid[1]});
        );
        out center;`;

    try {
        // Fetch data from the Overpass API
        const response = await fetch(`${baseUrl}?data=${encodeURIComponent(query)}`);
        const data = await response.json();

        // Extract random points from the response
        const randomPoints = [];
        const elements = data.elements;
        for (let i = 0; i < Math.min(numPoints, elements.length); i++) {
            const element = elements[i];
            if (element.type === 'node') {
                randomPoints.push([element.lat, element.lon]);
            } else if (element.type === 'way' || element.type === 'relation') {
                randomPoints.push([element.center.lat, element.center.lon]);
            }
        }

        return randomPoints;
    } catch (error) {
        console.error('Error fetching random points:', error);
        return [];
    }
}


    function checkDistance(currentPosition, randomPoints) {
        randomPoints.forEach(function(point) {
            var distance = L.latLng(currentPosition).distanceTo(L.latLng(point));
            if (distance < 100) {
                var newRandomPoints = generateRandomPoints(currentPosition, 1000, 1);
                newRandomPoints.forEach(function(newPoint) {
                    L.marker(newPoint).addTo(markersLayer);
                });
            }
        });
    }

    function onLocationFound(e) {
        var currentPosition = e.latlng;
        var randomPoints = generateRandomPoints(currentPosition, 1000, 1);
        randomPoints.forEach(function(point) {
            L.marker(point).addTo(markersLayer);
        });
        checkDistance(currentPosition, randomPoints);
    }

    map_7d35a53c9e585e88dcd08f0981e271d1.on('locationfound', onLocationFound);

    L.control.locate().addTo(map_7d35a53c9e585e88dcd08f0981e271d1);
</script>
</html>
